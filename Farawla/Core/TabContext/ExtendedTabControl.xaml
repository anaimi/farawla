<TabControl x:Class="Farawla.Core.TabContext.ExtendedTabControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:TabContext="clr-namespace:Farawla.Core.TabContext"
    xmlns:Core="clr-namespace:Farawla.Core"
    Style="{StaticResource TabControlControl}"
	Margin="0" FontSize="12">
    
	<TabControl.Resources>
		<LinearGradientBrush x:Key="TabHoverColor" StartPoint="0,0" EndPoint="0,1">
			<GradientStop Color="#FFB0B0B0" Offset="0"/>
			<GradientStop Color="#FFA0A0A0" Offset="1"/>
		</LinearGradientBrush>

		<LinearGradientBrush x:Key="TabNotSelectedColor" StartPoint="0,0" EndPoint="0,1">
			<GradientStop Color="#FFA0A0A0" Offset="0"/>
			<GradientStop Color="#FF909090" Offset="1"/>
		</LinearGradientBrush>

		<LinearGradientBrush x:Key="TabSelectedColor" StartPoint="0,1" EndPoint="0,0" >
			<GradientStop Color="#FFF4F8FE" Offset="0"/>
			<GradientStop Color="#FFFFFFFF" Offset="1"/>
		</LinearGradientBrush>

		<!-- TabItem style -->
		<Style x:Key="{x:Type TabItem}" TargetType="{x:Type TabItem}">
			<Setter Property="SnapsToDevicePixels" Value="True"/>
			<Setter Property="FocusVisualStyle" Value="{x:Null}"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="TabItem">
						<Grid x:Name="Container" Margin="0,0,-15,0">
							
							<Grid.ColumnDefinitions>
								<ColumnDefinition />
								<ColumnDefinition />
								<ColumnDefinition />
							</Grid.ColumnDefinitions>

							<Path x:Name="Left" Grid.Column="0" Fill="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabInactiveColor'}" Data="M0,20 L20,0 L20,20" Width="20" Height="20" />
							<Rectangle x:Name="Middle" Grid.Column="1" Fill="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabInactiveColor'}" Height="20" />
							<Path x:Name="Right" Grid.Column="2" Fill="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabInactiveColor'}" Data="M0,0 L20,20 L0,20" Width="20" Height="20" />

							<ContentPresenter Grid.Column="1" HorizontalAlignment="Center" x:Name="Content" ContentSource="Header" Margin="5,2,5,2" VerticalAlignment="Center" TextBlock.Foreground="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabInactiveCaptionColor'}" />
						</Grid>

						<ControlTemplate.Triggers>

							<Trigger Property="IsMouseOver" Value="True" SourceName="Container">
								<Setter TargetName="Left" Property="Fill" Value="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabHoverColor'}" />
								<Setter TargetName="Middle" Property="Fill" Value="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabHoverColor'}" />
								<Setter TargetName="Right" Property="Fill" Value="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabHoverColor'}" />
							</Trigger>

							<Trigger Property="Selector.IsSelected" Value="True">
								<Setter TargetName="Left" Property="Fill" Value="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabSelectedColor'}" />
								<Setter TargetName="Middle" Property="Fill" Value="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabSelectedColor'}" />
								<Setter TargetName="Right" Property="Fill" Value="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabSelectedColor'}" />

								<Setter TargetName="Content" Property="TextBlock.Foreground" Value="{Binding Converter={Core:ThemeColorConverter},ConverterParameter='WindowTabSelectedCaptionColor'}" />
								<Setter Property="Panel.ZIndex" Value="2"/>
							</Trigger>

						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</TabControl.Resources>
	
</TabControl>
